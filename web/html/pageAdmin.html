<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Profile Étudiant</title>
    <link rel="stylesheet" href="/web/css/pageAdmin.css">
</head>
<body>
<h1>Page admin</h1>
{{if eq .Defi_actuel.Num -1}}
    Il n'y a pas de défi en cours
{{else}}
    Défi actuel : défi n°{{.Defi_actuel.Num}}<br>
    Il a commencé le {{.Defi_actuel.Date_debut}}
    et se termine le {{.Defi_actuel.Date_fin}}
<br>
<h3>Formumaire pour modifier uniquement la date :</h3>
<form action="/pageAdmin?form=modify_date" method="post">
    Format date : "YYYY-MM-DD" <br>
    Date de début : <input type="text" name="date_debut" value="{{.Defi_actuel.Date_debut}}"> <br>
    Date de fin : <input type="text" name="date_fin" value="{{.Defi_actuel.Date_fin}}"> <br>
    <input type="submit">
</form>
{{end}}

<br>
<h3>Formulaire pour enregistrer un défis avec sa correction,<br> sa date de début et de fin. Il peut aussi servir à modifier la correction du défi actuel.</h3>
<form   enctype="multipart/form-data"  action="/pageAdmin?form=defi" method="post">
    Dépot de la correction : <input type="file" name="defi"><br>
    Format date : "YYYY-MM-DD" <br>
    Date de début : <input type="text" name="date_debut" value="{{.Defi_actuel.Date_debut}}"> <br>
    Date de fin : <input type="text" name="date_fin" value="{{.Defi_actuel.Date_fin}}"> <br>
    <input type="submit" value="déposer" name="submit"/>
    <input type="submit" value="modifier" name="submit"/>
</form>

<h3>Formulaire pour upload des tests : </h3>
<form enctype="multipart/form-data" action="/pageAdmin?form=test" method="post">
    Dépot du test : <input type="file" name="test"><br>
    <input type="submit" value="déposer" name="submit">
</form>
<br>

<h3>Formulaire pour get resultat : </h3>
<form enctype="multipart/form-data" action="/pageAdmin?form=getResult" method="post">
    Numéro du défi :<input type="number" name="num" min="10" max="100" value="0"><br>
    <input type="submit" value="télécharger" name="submit">
</form>
<br>
Liste des étudiants :
<div id="etudiants">
    {{range .Etudiants}}
        <a href="pageAdmin?Etudiant={{.Login}}">{{.Nom}} {{.Prenom}}</a><br>
    {{end}}
    <br>
    <a href="pageAdmin">désélectionner</a>
</div>
Info de l'étudiant :
<div id="etudiant">
    {{range .Res_etu}}
        Defi n°{{.Defi}}
        Etat :  {{if eq .Etat 1}}
                Réussi
                {{else if eq .Etat 0}}
                Échoué
                {{end}}
        Nombre de tentative : {{.Tentative}}
        <a href="pageAdmin?Etudiant={{$.Etu_select}}&Script={{.Defi}}">
            Afficher le script
        </a>
        <a href="pageAdmin?Etudiant={{$.Etu_select}}&Script={{.Defi}}&Etat={{.Etat}}">
            Modifier l'état de la partie
        </a>
    <br>
    {{end}}
</div>

Contenu du script :
<div id="file">
    {{range .File}}
        {{.}} <br>
    {{end}}
</div>

<h3>Logs :</h3>
<div>
    {{range .Logs}}
        <a href="pageAdmin?Log={{.}}">{{.}}</a><br>
    {{end}}
    <a href="pageAdmin">désélectionner</a>
</div>
{{if .Log}}
    Contenu des logs du {{.LogDate}} : <br>
    <div>
        {{range .Log}}
            {{.}}<br>
        {{end}}
    </div>
{{end}}

</body>
</html>